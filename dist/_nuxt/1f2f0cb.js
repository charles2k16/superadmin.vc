(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{629:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"COUNTS"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"company_aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"user_aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"post_aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"post_comment_aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"tag_aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:313}};t.loc.source={body:"query COUNTS {\n  company_aggregate {\n    aggregate {\n      count\n    }\n  }\n  user_aggregate {\n    aggregate {\n      count\n    }\n  }\n  post_aggregate {\n    aggregate {\n      count\n    }\n  }\n  post_comment_aggregate {\n    aggregate {\n      count\n    }\n  }\n\n  tag_aggregate {\n    aggregate {\n      count\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function o(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,n)})),e.definitions&&e.definitions.forEach((function(e){o(e,n)}))}var r={};function c(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach((function(e){if(e.name){var n=new Set;o(e,n),r[e.name.value]=n}})),e.exports=t,e.exports.COUNTS=function(e,n){var t={kind:e.kind,definitions:[c(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var o=r[n]||new Set,d=new Set,l=new Set;for(o.forEach((function(e){l.add(e)}));l.size>0;){var m=l;l=new Set,m.forEach((function(e){d.has(e)||(d.add(e),(r[e]||new Set).forEach((function(e){l.add(e)})))}))}return d.forEach((function(n){var o=c(e,n);o&&t.definitions.push(o)})),t}(t,"COUNTS")},630:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ListCompanies"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"company"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"business_stage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"city"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"country"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"business_objective"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"investmentEtaMetric"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"investmentEtaValue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"billing_subscriptions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"planId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"companyId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"priceId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentEndDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"currentStartDate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stripeSubscriptionId"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:407}};t.loc.source={body:"query ListCompanies {\n  company {\n    business_stage {\n      name\n    }\n    city\n    country\n    id\n    name\n    size\n    business_objective {\n      description\n      value\n    }\n    createdAt\n    investmentEtaMetric\n    investmentEtaValue\n    billing_subscriptions {\n      status\n      planId\n      companyId\n      priceId\n      currentEndDate\n      currentStartDate\n      stripeSubscriptionId\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function o(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,n)})),e.definitions&&e.definitions.forEach((function(e){o(e,n)}))}var r={};function c(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach((function(e){if(e.name){var n=new Set;o(e,n),r[e.name.value]=n}})),e.exports=t,e.exports.ListCompanies=function(e,n){var t={kind:e.kind,definitions:[c(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var o=r[n]||new Set,d=new Set,l=new Set;for(o.forEach((function(e){l.add(e)}));l.size>0;){var m=l;l=new Set,m.forEach((function(e){d.has(e)||(d.add(e),(r[e]||new Set).forEach((function(e){l.add(e)})))}))}return d.forEach((function(n){var o=c(e,n);o&&t.definitions.push(o)})),t}(t,"ListCompanies")},646:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ListCoupons"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"coupon"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commission"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"company_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:115}};t.loc.source={body:"query ListCoupons {\n  coupon {\n    code\n    commission\n    company_id\n    created_at\n    discount\n    status\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function o(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,n)})),e.definitions&&e.definitions.forEach((function(e){o(e,n)}))}var r={};function c(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach((function(e){if(e.name){var n=new Set;o(e,n),r[e.name.value]=n}})),e.exports=t,e.exports.ListCoupons=function(e,n){var t={kind:e.kind,definitions:[c(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var o=r[n]||new Set,d=new Set,l=new Set;for(o.forEach((function(e){l.add(e)}));l.size>0;){var m=l;l=new Set,m.forEach((function(e){d.has(e)||(d.add(e),(r[e]||new Set).forEach((function(e){l.add(e)})))}))}return d.forEach((function(n){var o=c(e,n);o&&t.definitions.push(o)})),t}(t,"ListCoupons")},664:function(e,n,t){"use strict";t.r(n);var o=t(18),r=(t(80),t(29),t(249),t(16),t(21),t(53),t(73),t(19),t(28),t(69),t(35),t(629)),c=t.n(r),d=t(630),l=t.n(d),m=t(646),v=t.n(m),f={name:"App",components:{},layout:"dashboard",data:function(){return{isOpen:!1,counts:{},businesses:[],coupons:[],search:""}},fetch:function(){this.getCounts(),this.getBusiness(),this.getCoupons()},computed:{filteredBusinesses:function(){var e=this;return this.search?this.businesses.filter((function(n){var t,o,r,c,d,l,m,v,f;return(null===(t=n.name)||void 0===t?void 0:t.toLowerCase().includes(null===(o=e.search)||void 0===o?void 0:o.toLowerCase()))||(null===(r=n.city)||void 0===r?void 0:r.toLowerCase().includes(null===(c=e.search)||void 0===c?void 0:c.toLowerCase()))||(null===(d=n.country)||void 0===d?void 0:d.toLowerCase().includes(null===(l=e.search)||void 0===l?void 0:l.toLowerCase()))||(null===(m=n.business_stage)||void 0===m||null===(v=m.name)||void 0===v?void 0:v.toLowerCase().includes(null===(f=e.search)||void 0===f?void 0:f.toLowerCase()))})):this.businesses},businessesToDownload:function(){return this.businesses.map((function(e){var n,t;return{name:e.name,stage:null===(n=e.business_stage)||void 0===n?void 0:n.name,city:e.city,country:e.country,objective:null===(t=e.business_objective)||void 0===t?void 0:t.description,investmentReady:"".concat(e.investmentEtaValue," ").concat(e.investmentEtaMetric),createdAt:e.createdAt}}))}},methods:{copyToClipboard:function(code){return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(String(code));case 3:alert("Coupon copied successfully"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Failed to copy text: ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},sendToMail:function(code){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.$post("https://vibrantcreator-backend-dev.herokuapp.com/v1/api/admin/".concat(code,"/coupon/send"));case 3:alert("Coupon successfully sent to Company Mail"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error("Failed to copy text: ",n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},getCounts:function(){var e=this;this.$apollo.query({query:c.a}).then((function(n){var data=n.data;e.counts=data}))},getBusiness:function(){var e=this;this.$apollo.query({query:l.a}).then((function(n){var data=n.data;e.businesses=data.company}))},getCoupons:function(){var e=this;this.$apollo.query({query:v.a}).then((function(n){var data=n.data;e.coupons=data.coupon}))},open:function(){this.isOpen=!0},close:function(){this.isOpen=!1}}},k=t(91),component=Object(k.a)(f,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container"},[t("c-heading",{attrs:{marginBottom:"20px"}},[e._v("Coupons")]),e._v(" "),t("c-box",{attrs:{d:"flex","align-items":"center",mb:"5"}},[t("c-input-group",{attrs:{w:"100",mr:"5"}},[t("c-input-left-element",[t("i",{staticClass:"fa fa-search"})]),e._v(" "),t("c-input",{attrs:{type:"text",placeholder:"Search business by name, email"},model:{value:e.search,callback:function(n){e.search=n},expression:"search"}})],1)],1),e._v(" "),t("div",[t("c-stack",{attrs:{spacing:5}},[t("c-box",{attrs:{p:5,"border-width":"1px"}},[e._l(e.coupons,(function(n){return[t("c-grid",{attrs:{"template-columns":"repeat(9, 1fr)"}},[t("c-box",[t("c-text",{attrs:{fontSize:"11px",color:"gray.500"}},[e._v("Parent Company")]),e._v(" "),e._l(e.filteredBusinesses,(function(o){return t("c-box",{key:o.id},[o.id===n.company_id?t("c-box",{attrs:{fontSize:"13px"}},[e._v("\n                  "+e._s(o.name)+"\n                ")]):e._e()],1)}))],2),e._v(" "),t("c-box",[t("c-text",{attrs:{fontSize:"11px",color:"gray.500"}},[e._v("Recipient Company")]),e._v(" "),e._l(e.filteredBusinesses,(function(o){return t("c-box",{key:o.id},[o.id===n.company_id?t("c-box",{attrs:{fontSize:"13px"}},[e._v("\n                  "+e._s(o.name)+"\n                ")]):e._e()],1)}))],2),e._v(" "),t("c-box",[t("c-text",{attrs:{fontSize:"11px",color:"gray.500"}},[e._v("Created At")]),e._v(" "),t("c-text",{attrs:{fontSize:"13px"}},[e._v("\n                "+e._s(e.$moment(n.created_at).format("MM / DD / YYYY")))])],1),e._v(" "),t("c-box",[t("c-text",{attrs:{fontSize:"11px",color:"gray.500"}},[e._v("Discount")]),e._v(" "),t("c-text",{attrs:{fontSize:"13px"}},[e._v(e._s(n.discount)+" % ")])],1),e._v(" "),t("c-box",[t("c-text",{attrs:{fontSize:"11px",color:"gray.500"}},[e._v("Commission")]),e._v(" "),t("c-text",{attrs:{fontSize:"13px"}},[e._v(e._s(n.commission)+" % ")])],1),e._v(" "),t("c-box",[t("c-text",{attrs:{fontSize:"11px",color:"gray.500"}},[e._v("Status")]),e._v(" "),t("c-text",{attrs:{fontSize:"13px"}},["ACTIVE"===n.status?t("c-badge",{attrs:{mx:"2","variant-color":"green"}},[e._v(e._s(n.status))]):e._e(),e._v(" "),"USED"===n.status?t("c-badge",{attrs:{mx:"2","variant-color":"red"}},[e._v(e._s(n.status))]):e._e()],1)],1),t("c-box",[t("c-text",{attrs:{fontSize:"11px",color:"gray.500"}},[e._v("Code")]),e._v(" "),t("c-flex",[t("c-text",{attrs:{fontSize:"13px"}},[e._v(e._s(n.code))])],1)],1),e._v(" "),t("c-box",[t("c-button",{attrs:{"variant-color":"blue",size:"xs",mt:"3"},on:{click:function(t){return e.copyToClipboard(n.code)}}},[e._v("\n                Copy\n              ")])],1),e._v(" "),t("c-box",[t("c-button",{attrs:{"variant-color":"blue",size:"xs",mt:"3"},on:{click:function(t){return e.sendToMail(n.code)}}},[e._v("\n                Send\n              ")])],1)],1),e._v(" "),t("c-divider")]}))],2)],1)],1)],1)}),[],!1,null,null,null);n.default=component.exports;t(248)(component,{CHeading:t(38).CHeading,CInputLeftElement:t(38).CInputLeftElement,CInput:t(38).CInput,CInputGroup:t(38).CInputGroup,CBox:t(38).CBox,CText:t(38).CText,CBadge:t(38).CBadge,CFlex:t(38).CFlex,CButton:t(38).CButton,CGrid:t(38).CGrid,CDivider:t(38).CDivider,CStack:t(38).CStack})}}]);