(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{642:function(e,n){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ADMIN"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"admin"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"firstName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lastName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"role"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:111}};t.loc.source={body:"query ADMIN {\n  admin {\n    createdAt\n    email\n    firstName\n    id\n    lastName\n    role\n    updatedAt\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function o(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,n)})),e.definitions&&e.definitions.forEach((function(e){o(e,n)}))}var d={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==n)return element}}t.definitions.forEach((function(e){if(e.name){var n=new Set;o(e,n),d[e.name.value]=n}})),e.exports=t,e.exports.ADMIN=function(e,n){var t={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var o=d[n]||new Set,l=new Set,c=new Set;for(o.forEach((function(e){c.add(e)}));c.size>0;){var m=c;c=new Set,m.forEach((function(e){l.has(e)||(l.add(e),(d[e]||new Set).forEach((function(e){c.add(e)})))}))}return l.forEach((function(n){var o=r(e,n);o&&t.definitions.push(o)})),t}(t,"ADMIN")},663:function(e,n,t){"use strict";t.r(n);var o=t(18),d=(t(80),t(642)),r=t.n(d),l={name:"App",components:{},layout:"dashboard",data:function(){return{counts:{},admins:[],add:{firstName:"",lastName:"",email:""},isOpenModal:!1,addingAdmin:!1}},fetch:function(){this.getAdmins()},computed:{},methods:{getAdmins:function(){var e=this;this.$apollo.query({query:r.a}).then((function(n){var data=n.data;console.log(data),e.admins=data.admin}))},openAddAmin:function(){this.isOpenModal=!0},closeModal:function(){this.add={firstName:"",lastName:"",email:""},this.isOpenModal=!1,this.getAdmins()},addAdmin:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.addingAdmin=!0,n.prev=1,n.next=4,e.$axios.post("/admin",e.add);case 4:e.closeModal(),n.next=12;break;case 7:n.prev=7,n.t0=n.catch(1),e.closeModal(),t=n.t0.response.data.message,e.$toast({description:t,status:"error",duration:5e3});case 12:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}},c=t(91),component=Object(c.a)(l,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container"},[t("c-heading",{attrs:{marginBottom:"20px"}},[e._v("Admins\n    "),t("c-button",{attrs:{size:"xs","variant-color":"blue"},on:{click:function(n){return e.openAddAmin()}}},[e._v("\n      Add Admin\n    ")])],1),e._v(" "),t("div",[t("c-stack",{attrs:{spacing:5}},[t("c-box",{attrs:{p:5,"border-width":"1px"}},[e._l(e.admins,(function(n){return[t("nuxt-link",{key:n.id,attrs:{to:"./admin/"+n.id}},[t("c-grid",{attrs:{"template-columns":"100px repeat(3, 1fr)"}},[t("c-box",[t("c-avatar",{attrs:{name:n.firstName?n.firstName+" "+n.lastName:null}})],1),e._v(" "),t("c-box",[t("c-text",{attrs:{fontSize:"11px",color:"gray.500"}},[e._v(" Name ")]),e._v(" "),t("c-text",{attrs:{fontSize:"13px"}},[e._v("\n                  "+e._s(n.firstName?n.firstName+" "+n.lastName:"No name")+"\n                ")])],1),e._v(" "),t("c-box",[t("c-text",{attrs:{fontSize:"11px",color:"gray.500"}},[e._v(" Email ")]),e._v(" "),t("c-text",{attrs:{fontSize:"13px"}},[e._v("\n                  "+e._s(n.email)+"\n                ")])],1),e._v(" "),t("c-box",[t("c-text",{attrs:{fontSize:"11px",color:"gray.500"}},[e._v("\n                  Registeration Date\n                ")]),e._v(" "),t("c-text",{attrs:{fontSize:"13px"}},[e._v("\n                  "+e._s(e.$moment(n.createdAt).calendar())+"\n                ")])],1)],1)],1),e._v(" "),t("c-divider",{key:n.id})]}))],2)],1)],1),e._v(" "),t("c-modal",{attrs:{"is-open":e.isOpenModal,"on-close":e.closeModal,closeOnOverlayClick:!1,size:"xl"}},[t("c-modal-content",{ref:"content"},[t("c-modal-header",[e._v("Add Admin")]),e._v(" "),t("c-modal-close-button"),e._v(" "),t("c-modal-body",[t("c-stack",[t("c-label",[t("b",[e._v("First name")]),e._v(" "),t("c-input",{attrs:{size:"md",required:""},model:{value:e.add.firstName,callback:function(n){e.$set(e.add,"firstName",n)},expression:"add.firstName"}})],1),e._v(" "),t("c-label",[t("b",[e._v("Last name")]),e._v(" "),t("c-input",{attrs:{size:"md",required:""},model:{value:e.add.lastName,callback:function(n){e.$set(e.add,"lastName",n)},expression:"add.lastName"}})],1),e._v(" "),t("c-label",[t("b",[e._v("Email")]),e._v(" "),t("c-input",{attrs:{type:"email",size:"md",required:""},model:{value:e.add.email,callback:function(n){e.$set(e.add,"email",n)},expression:"add.email"}})],1)],1)],1),e._v(" "),t("c-modal-footer",[t("c-button",{attrs:{isLoading:e.addingAdmin,"variant-color":"blue",mr:"3"},on:{click:e.addAdmin}},[e._v("\n          Save\n        ")]),e._v(" "),t("c-button",{on:{click:e.closeModal}},[e._v("Close")])],1)],1),e._v(" "),t("c-modal-overlay")],1)],1)}),[],!1,null,null,null);n.default=component.exports;t(247)(component,{CButton:t(38).CButton,CHeading:t(38).CHeading,CAvatar:t(38).CAvatar,CBox:t(38).CBox,CText:t(38).CText,CGrid:t(38).CGrid,CDivider:t(38).CDivider,CStack:t(38).CStack,CModalHeader:t(38).CModalHeader,CModalCloseButton:t(38).CModalCloseButton,CInput:t(38).CInput,CModalBody:t(38).CModalBody,CModalFooter:t(38).CModalFooter,CModalContent:t(38).CModalContent,CModalOverlay:t(38).CModalOverlay,CModal:t(38).CModal})}}]);